<mxfile host="app.diagrams.net" modified="2023-02-22T02:52:44.961Z" agent="5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/110.0.0.0 Safari/537.36" etag="aKSO-H20RJLe5JrYGLzC" version="20.8.21" type="github">
  <diagram id="C5RBs43oDa-KdzZeNtuy" name="Page-1">
    <mxGraphModel dx="2514" dy="2080" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="WIyWlLk6GJQsqaUBKTNV-1" parent="WIyWlLk6GJQsqaUBKTNV-0" />
        <mxCell id="IKpMw9BlruUS-73h-JzX-0" value="RecommendSearchServiceImpl" style="rounded=0;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="160" y="-90" width="950" height="30" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-42" target="IKpMw9BlruUS-73h-JzX-2" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="210" y="185" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-2" target="IKpMw9BlruUS-73h-JzX-6" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-8" value="是" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" parent="IKpMw9BlruUS-73h-JzX-7" vertex="1" connectable="0">
          <mxGeometry x="0.1913" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-2" target="IKpMw9BlruUS-73h-JzX-10" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-2" value="缓存中有排序&lt;br&gt;好的数据" style="rhombus;whiteSpace=wrap;html=1;shadow=0;fontFamily=Helvetica;fontSize=12;align=center;strokeWidth=1;spacing=6;spacingTop=-4;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="250" y="145" width="120" height="80" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-5" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;endWidth=16;endSize=7.87;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="230" y="110" as="sourcePoint" />
            <mxPoint x="270" y="160" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="RgbNJP2qgsjBoMVSOBVE-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-6" target="IKpMw9BlruUS-73h-JzX-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-6" value="Redis" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="360" y="332" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-10" target="IKpMw9BlruUS-73h-JzX-14" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-10" value="&lt;div&gt;获取插坑商品&lt;/div&gt;&lt;div&gt;getCategoryInterveneSpuDTOS&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="390" y="152.5" width="190" height="65" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-13" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="460" y="90" as="sourcePoint" />
            <mxPoint x="500" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-21" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-14" target="IKpMw9BlruUS-73h-JzX-22" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="980" y="185" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-14" value="&lt;div&gt;请求山姆或有数方的“为您推荐”商品&lt;/div&gt;&lt;div&gt;doStandardCategoryRecommend&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="610" y="146.5" width="250" height="77" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-17" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="770" y="80" as="sourcePoint" />
            <mxPoint x="780" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.544;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitPerimeter=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-22" target="IKpMw9BlruUS-73h-JzX-23" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-22" value="&lt;div&gt;组装埋点数据&lt;/div&gt;&lt;div&gt;getRecommendBuryMap&lt;/div&gt;&lt;div&gt;这埋点数据是从doStandardCategoryRecommend来的&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="900" y="144" width="250" height="82" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-23" target="IKpMw9BlruUS-73h-JzX-25" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-23" value="&lt;div&gt;“为您推荐”+插坑商品 进行其中的有效商品的查询&lt;/div&gt;&lt;div&gt;getConditionResponse&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="970" y="260" width="140" height="72" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-25" target="IKpMw9BlruUS-73h-JzX-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-25" value="根据“为您推荐”+插坑商品商品查询品牌类目并且“筛选出有效的”" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="970" y="360" width="140" height="55" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-27" target="IKpMw9BlruUS-73h-JzX-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-27" value="品牌类目列表进行榜单外露的位置的组装" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="980" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-29" target="IKpMw9BlruUS-73h-JzX-31" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-29" value="&lt;div&gt;插坑埋点的组装标记&lt;/div&gt;&lt;div&gt;buildInterveneTag&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="830" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-31" target="IKpMw9BlruUS-73h-JzX-44" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-31" value="&lt;div&gt;对当前页的推荐商品排序&lt;/div&gt;&lt;div&gt;getSpuStoreDTOS&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="650" y="446.5" width="150" height="67" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-38" value="新接口，直接查询 spu 表&lt;br&gt;/api/v1/tx/goods/spu-search/searchSpuAndBrand" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="750" y="260" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-39" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="880" y="352.5" as="sourcePoint" />
            <mxPoint x="950" y="380" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-41" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="875" y="420" as="sourcePoint" />
            <mxPoint x="980" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-42" value="categoryRecommendList" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="30" y="150" width="180" height="70" as="geometry" />
        </mxCell>
        <mxCell id="RgbNJP2qgsjBoMVSOBVE-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-44" target="IKpMw9BlruUS-73h-JzX-53">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-44" value="写入缓存，1分钟" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="500" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-45" value="返回" style="shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="70" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-40" value="只取榜单前五的商品" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="780" y="360" width="140" height="80" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-52" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1181" y="287.5" as="sourcePoint" />
            <mxPoint x="1121" y="297.5" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-51" value="/api/v1/tx/goods/spu-search/searchSpuInSimpl" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="1161" y="217.5" width="200" height="90" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-16" value="&lt;div&gt;这里的推荐商品是排除了插坑商品的，插坑商品后面组装进去&lt;/div&gt;&lt;div&gt;，所以调用接口时会排除插坑商品&lt;/div&gt;&lt;div&gt;调用山姆或有数接口：&lt;/div&gt;&lt;div&gt;/vision-recommend/product_service/recommend/get&lt;/div&gt;&lt;div&gt;/product_service/recommend/get&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="590" y="-60" width="430" height="160" as="geometry" />
        </mxCell>
        <mxCell id="RgbNJP2qgsjBoMVSOBVE-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-53" target="IKpMw9BlruUS-73h-JzX-56">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-53" value="只返回需要的条数，多余的去除&lt;br&gt;getPageList" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="360" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="RgbNJP2qgsjBoMVSOBVE-5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="WIyWlLk6GJQsqaUBKTNV-1" source="IKpMw9BlruUS-73h-JzX-56" target="IKpMw9BlruUS-73h-JzX-45">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-56" value="查询商品的详细信息&lt;br&gt;getFullDetail" style="rounded=1;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="220" y="450" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-59" value="根据插坑商品、&lt;br&gt;榜单商品、&lt;br&gt;已购商品&lt;br&gt;对查询到的数据进行减坑排序" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="520" y="280" width="210" height="110" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-60" value="" style="shape=flexArrow;endArrow=classic;html=1;rounded=0;" parent="WIyWlLk6GJQsqaUBKTNV-1" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="660" y="390" as="sourcePoint" />
            <mxPoint x="710" y="440" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-3" value="主要是获取：&lt;div style=&quot;resize: none; outline: none; font-size: 13px; color: rgb(50, 50, 50); font-family: 微软雅黑;&quot;&gt;1.List&amp;lt;SpuStoreDTO&amp;gt;&amp;nbsp;spuStoreDTOS&lt;/div&gt;&lt;div style=&quot;resize: none; outline: none; font-size: 13px; color: rgb(50, 50, 50); font-family: 微软雅黑;&quot;&gt;2.Map&amp;lt;String,&amp;nbsp;Map&amp;lt;String,&amp;nbsp;Object&amp;gt;&amp;gt;&amp;nbsp;spuOuterService&lt;/div&gt;&lt;div style=&quot;resize: none; outline: none; font-size: 13px; color: rgb(50, 50, 50); font-family: 微软雅黑;&quot;&gt;2是埋点数据&lt;/div&gt;" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="-40" y="50" width="480" height="80" as="geometry" />
        </mxCell>
        <mxCell id="IKpMw9BlruUS-73h-JzX-12" value="&lt;div&gt;Redis&lt;/div&gt;cache:category:intervene:spu:{0}:{1}" style="ellipse;shape=cloud;whiteSpace=wrap;html=1;" parent="WIyWlLk6GJQsqaUBKTNV-1" vertex="1">
          <mxGeometry x="360" y="-20" width="280" height="140" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
